project.ext {
    flavorConfigs = [
            google    : new FlavorConfig(
                    APPLICATION_ID: "com.cctv.iptime",
                    APP_NAME_PREFIX: "ipTIME_V",
                    VERSION_CODE: 1832,
                    VERSION_NAME: "01.02.02",
                    appId: "244d1828c953492dacb0ca5201f54221",
                    appToken: "0bedfb9f0f8404683a58ff636b7b8c8f0c5e809d72ab9cdc1ed5a64782b9a315",
                    appName: "ipTIME CCTV_android",
                    appCid: "08.01",
                    websiteHostBaseUrl: "https://openapi.dophigo.com/",
                    websitePluginHostUrl: "https://openapi-plugin.dophigo.com/",
                    websiteH5HostUrl: "https://trade.dophigo.com/",
                    websiteIOTUrl: "|list.iotvideo.cloudlinks.cn",
                    qrCodeDomain: "dophigo.com",
                    aboutUpdateVersion: "https://reoqoo.com/d/",
                    isGoogle: true,
                    websiteHostBaseTestUrl: "https://openapi-test.reoqoo.com/",
                    websitePluginHostTestUrl: "https://openapi-test-plugin.reoqoo.com/",
                    websiteH5HostTestUrl: "https://trade-test.reoqoo.com/",
                    yooseeShareTypes: [YooseeShareType.QRCODE, YooseeShareType.PHONE],
                    defaultLanguage: Language.EN,
                    supportGooglePay: false,
                    runAppByReoqooSource: true,
                    feedbackEmail: "support@reoqoo.com",
                    googlePayType: GooglePayType.NONE,
                    isInternalApp: true
            ),
            iptime       : new FlavorConfig(
                    APPLICATION_ID: "com.cctv.iptime",
                    APP_NAME_PREFIX: "ipTIME_V",
                    VERSION_CODE: 1832,
                    VERSION_NAME: "01.02.02",
                    appId: "244d1828c953492dacb0ca5201f54221",
                    appToken: "0bedfb9f0f8404683a58ff636b7b8c8f0c5e809d72ab9cdc1ed5a64782b9a315",
                    appName: "ipTIME CCTV_android",
                    appCid: "08.01",
                    websiteHostBaseUrl: "https://openapi.dophigo.com/",
                    websitePluginHostUrl: "https://openapi-plugin.dophigo.com/",
                    websiteH5HostUrl: "https://trade.dophigo.com/",
                    websiteIOTUrl: "|list.iotvideo.cloudlinks.cn",
                    qrCodeDomain: "dophigo.com",
                    aboutUpdateVersion: "https://reoqoo.com/d/",
                    isGoogle: true,
                    websiteHostBaseTestUrl: "https://openapi-test.reoqoo.com/",
                    websitePluginHostTestUrl: "https://openapi-test-plugin.reoqoo.com/",
                    websiteH5HostTestUrl: "https://trade-test.reoqoo.com/",
                    yooseeShareTypes: [YooseeShareType.QRCODE, YooseeShareType.PHONE],
                    defaultLanguage: Language.KO,
                    runAppByReoqooSource: true,
                    supportGooglePay: true,
                    googlePayType: GooglePayType.BILLING,
                    isInternalApp: false
            ),
    ]
}

// 打印到终端
println "----------------------------------------------------------------"
println "app模块 的 配置:"
println " flavorConfigs = " + project.ext.flavorConfigs
println "----------------------------------------------------------------"

/**
 * 每个渠道不同的配置
 */
class FlavorConfig {
    /**
     * 包名(APPLICATION_ID)
     */
    String APPLICATION_ID = ""
    /**
     * 包名前缀
     */
    String APP_NAME_PREFIX = ""
    /**
     * 版本号.
     */
    int VERSION_CODE = 0
    /**
     * 版本名
     */
    String VERSION_NAME = ""
    /**
     * APP_ID
     */
    String appId = ""
    /**
     * APP_TOKEN
     */
    String appToken = ""
    /**
     * APP_NAME
     */
    String appName = ""
    /**
     * APP_CID
     */
    String appCid = ""
    /**
     * BaseUrl
     */
    String websiteHostBaseUrl = ""
    /**
     * PluginUrl
     */
    String websitePluginHostUrl = ""
    /**
     * H5Url
     */
    String websiteH5HostUrl = ""
    /**
     * IOT的URL
     */
    String websiteIOTUrl = ""
    /**
     * 生成二维码的域名
     */
    String qrCodeDomain = ""
    /**
     * 关于我们--版本更新地址
     */
    String aboutUpdateVersion = ""
    /**
     * 是否是Google包
     */
    boolean isGoogle = false

    /**
     * Debug环境下的BaseUrl
     */
    String websiteHostBaseTestUrl = ""
    /**
     * Debug环境下的PluginUrl
     */
    String websitePluginHostTestUrl = ""
    /**
     * Debug环境下的H5Url
     */
    String websiteH5HostTestUrl = ""

    /**
     *  yoosee设备支持的分享类型
     */
    YooseeShareType[] yooseeShareTypes

    /**
     * app默认语言和国家
     */
    Language defaultLanguage

    /**
     * 是否支持Google支付
     */
    Boolean supportGooglePay = false

    /**
     * Google支付类型
     */
    GooglePayType googlePayType = GooglePayType.NONE

    /**
     * 通过Reoqoo的源码运行的APP
     */
    Boolean runAppByReoqooSource

    /**
     * 是否默认测试环境
     */
    Boolean defaultTestEnv = false

    /**
     * 反馈邮箱地址，如果不填或者空字符串，则在问题与反馈页面就不显示
     */
    String feedbackEmail = null

    /**
     * 是否是内部应用
     */
    Boolean isInternalApp = false

    void applyToApplication(flavor) {
        println("applyToApplication.flavor=" + flavor)
        flavor.applicationId(APPLICATION_ID)
        flavor.versionCode(VERSION_CODE)
        flavor.versionName(VERSION_NAME)

        flavor.ext.isGoogle = isGoogle
        flavor.ext.supportGooglePay = supportGooglePay
        flavor.ext.googlePayType = googlePayType
        flavor.ext.isInternalApp = isInternalApp

        flavor.buildConfigField("Boolean", "IS_GOOGLE", "${isGoogle}")
        flavor.buildConfigField("String", "APP_ID", "\"${appId}\"")
        flavor.buildConfigField("String", "APP_TOKEN", "\"${appToken}\"")
        flavor.buildConfigField("String", "APP_NAME", "\"${appName}\"")
        flavor.buildConfigField("String", "APP_CID", "\"${appCid}\"")
        flavor.buildConfigField("String", "VERSION_NAME", "\"${VERSION_NAME}\"")
        flavor.buildConfigField("int", "VERSION_CODE", "${VERSION_CODE}")

        flavor.buildConfigField("String", "WEBSITE_HOST_BASE_URL", "\"${websiteHostBaseUrl}\"")
        flavor.buildConfigField("String", "WEBSITE_PLUGIN_HOST_URL", "\"${websitePluginHostUrl}\"")
        flavor.buildConfigField("String", "WEBSITE_H5_HOST_URL", "\"${websiteH5HostUrl}\"")
        flavor.buildConfigField("String", "WEBSITE_IOT_URL", "\"${websiteIOTUrl}\"")
        flavor.buildConfigField("String", "QRCODE_DOMAIN", "\"${qrCodeDomain}\"")
        flavor.buildConfigField("String", "ABOUT_UPDATE_VERSION", "\"${aboutUpdateVersion}\"")
        flavor.buildConfigField("String", "WEBSITE_HOST_BASE_TEST_URL", "\"${websiteHostBaseTestUrl}\"")
        flavor.buildConfigField("String", "WEBSITE_PLUGIN_HOST_TEST_URL", "\"${websitePluginHostTestUrl}\"")
        flavor.buildConfigField("String", "WEBSITE_H5_HOST_TEST_URL", "\"${websiteH5HostTestUrl}\"")
        flavor.buildConfigField("String[]", "YOOSEE_SHARE_TYPES", "{${yooseeShareTypes.collect { "\"${it}\"" }.join(",")}}")
        flavor.buildConfigField("String", "DEFAULT_LANGUAGE", "\"${defaultLanguage.toString()}\"")
        flavor.buildConfigField("Boolean", "SUPPORT_GOOGLE_PAY", "${supportGooglePay}")
        flavor.buildConfigField("String", "GOOGLE_PAY_TYPE", "\"${googlePayType.toString()}\"")
        flavor.buildConfigField("Boolean", "IS_INTERNAL_APP", "${isInternalApp}")
    }

    void applyToModule(flavor) {
        println("applyToModule.flavor=" + flavor)
        def is_upload_plugin_mode = System.getenv('IS_UPLOAD_PLUGIN') ?: 'false'
        println("is_upload_plugin_mode=" + is_upload_plugin_mode)
        println("runAppByReoqooSource=" + runAppByReoqooSource)
        if (runAppByReoqooSource) {
            is_upload_plugin_mode = 'false'
        }
        println("applyToModule.is_upload_plugin_mode=" + is_upload_plugin_mode)
        flavor.buildConfigField("Boolean", "IS_GOOGLE", "${isGoogle}")
        flavor.buildConfigField("String", "DEFAULT_LANGUAGE", "\"${defaultLanguage.toString()}\"")
        flavor.buildConfigField("Boolean", "IS_UPLOAD_PLUGIN_MODE", "${is_upload_plugin_mode}")
        flavor.buildConfigField("Boolean", "SUPPORT_GOOGLE_PAY", "${supportGooglePay}")
        flavor.buildConfigField("Boolean", "DEFAULT_TEST_ENV", "${defaultTestEnv}")
        flavor.buildConfigField("String", "GOOGLE_PAY_TYPE", "\"${googlePayType.toString()}\"")
        flavor.buildConfigField("String", "APP_NAME", "\"${appName}\"")
        flavor.buildConfigField("String", "APP_CID", "\"${appCid}\"")
        flavor.buildConfigField("String", "VERSION_NAME", "\"${VERSION_NAME}\"")
        flavor.buildConfigField("int", "VERSION_CODE", "${VERSION_CODE}")
        flavor.buildConfigField("Boolean", "IS_INTERNAL_APP", "${isInternalApp}")
        if (feedbackEmail == null) {
            flavor.buildConfigField("String", "FEEDBACK_EMAIL", "null")
        } else {
            flavor.buildConfigField("String", "FEEDBACK_EMAIL", "\"$feedbackEmail\"")
        }
    }

    @Override
    String toString() {
        return "{" +
                "APPLICATION_ID=" + APPLICATION_ID + "," +
                "APP_NAME_PREFIX=" + APP_NAME_PREFIX + "," +
                "VERSION_CODE=" + VERSION_CODE + "," +
                "VERSION_NAME=" + VERSION_NAME + "," +
                "supportGooglePay=" + supportGooglePay + "," +
                "googlePayType=" + googlePayType + "," +
                "feedbackEmail=" + feedbackEmail + "," +
                "isInternalApp=" + isInternalApp + "," +
                "}"
    }
}

/**
 *  yoosee设备支持的分享类型
 */
enum YooseeShareType {
    QRCODE,
    PHONE,
    USER_ID
}


/**
 * app默认语言和国家
 */
enum Language {
    SYSTEM,
    ZH_HANS,
    ZH_HK,
    EN,
    KO
}

enum GooglePayType {
    NONE,
    BILLING,
    PAY
}
